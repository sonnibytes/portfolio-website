<!-- blog/templates/blog/admin/subscriber_confirm_delete.html -->
{% extends 'admin/admin_base.html' %}
{% load static %}

{% block admin_title %}Delete Subscriber - {{ object.email }}{% endblock %}

{% block admin_content %}
<div class="max-w-3xl mx-auto">
    
    <!-- Warning Card -->
    <div class="glass-card p-8 border border-red-500 border-opacity-50">
        
        <!-- Header -->
        <div class="text-center mb-8">
            <div class="inline-flex items-center justify-center w-20 h-20 rounded-full bg-red-500 bg-opacity-20 mb-4">
                <i class="fas fa-exclamation-triangle text-red-400 text-4xl"></i>
            </div>
            <h1 class="text-3xl font-bold text-white mb-2">
                Delete Subscriber?
            </h1>
            <p class="text-gray-400">
                This action cannot be undone
            </p>
        </div>

        <!-- Subscriber Info -->
        <div class="bg-white bg-opacity-5 rounded-lg p-6 mb-6">
            <div class="flex items-center gap-4 mb-4">
                <div class="flex-shrink-0 w-16 h-16 rounded-full bg-purple-500 bg-opacity-20 flex items-center justify-center">
                    <i class="fas fa-user text-purple-400 text-2xl"></i>
                </div>
                <div class="flex-1">
                    <div class="text-white text-xl font-semibold">{{ object.email }}</div>
                    <div class="flex items-center gap-3 mt-2">
                        {% if object.is_verified %}
                        <span class="px-2 py-1 bg-emerald-500 bg-opacity-20 text-emerald-400 rounded text-xs font-semibold">
                            <i class="fas fa-check-circle mr-1"></i>
                            Verified
                        </span>
                        {% else %}
                        <span class="px-2 py-1 bg-yellow-500 bg-opacity-20 text-yellow-400 rounded text-xs font-semibold">
                            <i class="fas fa-clock mr-1"></i>
                            Unverified
                        </span>
                        {% endif %}
                        
                        {% if object.is_active %}
                        <span class="px-2 py-1 bg-emerald-500 bg-opacity-20 text-emerald-400 rounded text-xs font-semibold">
                            Active
                        </span>
                        {% else %}
                        <span class="px-2 py-1 bg-gray-500 bg-opacity-20 text-gray-400 rounded text-xs font-semibold">
                            Inactive
                        </span>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Details -->
            <div class="grid grid-cols-2 gap-4 pt-4 border-t border-gray-700">
                <div>
                    <div class="text-sm text-gray-400 mb-1">Subscribed On</div>
                    <div class="text-white">{{ object.subscribed_at|date:"M d, Y" }}</div>
                </div>
                <div>
                    <div class="text-sm text-gray-400 mb-1">Subscription Type</div>
                    <div class="text-white">
                        {% if object.subscribe_to_all %}
                            <i class="fas fa-globe text-cyan-400 mr-1"></i> All Posts
                        {% else %}
                            <i class="fas fa-filter text-purple-400 mr-1"></i> Selective
                        {% endif %}
                    </div>
                </div>
                {% if not object.subscribe_to_all %}
                <div>
                    <div class="text-sm text-gray-400 mb-1">Categories</div>
                    <div class="text-white">{{ object.subscribed_categories.count }}</div>
                </div>
                <div>
                    <div class="text-sm text-gray-400 mb-1">Tags</div>
                    <div class="text-white">{{ object.subscribed_tags.count }}</div>
                </div>
                {% endif %}
            </div>
        </div>

        <!-- Subscription Details (if specific) -->
        {% if not object.subscribe_to_all and object.subscribed_categories.exists or object.subscribed_tags.exists %}
        <div class="bg-white bg-opacity-5 rounded-lg p-6 mb-6">
            <h3 class="text-white font-semibold mb-4">Subscription Preferences to be Deleted:</h3>
            
            {% if object.subscribed_categories.exists %}
            <div class="mb-4">
                <div class="text-sm text-gray-400 mb-2">
                    <i class="fas fa-folder text-purple-400 mr-1"></i>
                    Categories ({{ object.subscribed_categories.count }})
                </div>
                <div class="flex flex-wrap gap-2">
                    {% for category in object.subscribed_categories.all %}
                    <span class="px-3 py-1 bg-purple-500 bg-opacity-20 text-purple-400 rounded-lg text-sm">
                        {{ category.name }}
                    </span>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
            
            {% if object.subscribed_tags.exists %}
            <div>
                <div class="text-sm text-gray-400 mb-2">
                    <i class="fas fa-tags text-cyan-400 mr-1"></i>
                    Tags ({{ object.subscribed_tags.count }})
                </div>
                <div class="flex flex-wrap gap-2">
                    {% for tag in object.subscribed_tags.all %}
                    <span class="px-3 py-1 bg-cyan-500 bg-opacity-20 text-cyan-400 rounded-lg text-sm">
                        {{ tag.name }}
                    </span>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
        </div>
        {% endif %}

        <!-- Warning Messages -->
        <div class="space-y-3 mb-8">
            <div class="flex items-start gap-3 p-4 bg-red-500 bg-opacity-10 rounded-lg border border-red-500 border-opacity-30">
                <i class="fas fa-exclamation-circle text-red-400 flex-shrink-0 mt-1"></i>
                <div class="text-sm text-gray-300">
                    <strong class="text-red-400">This action is permanent.</strong> 
                    The subscriber record and all associated preferences will be deleted.
                </div>
            </div>
            
            <div class="flex items-start gap-3 p-4 bg-yellow-500 bg-opacity-10 rounded-lg border border-yellow-500 border-opacity-30">
                <i class="fas fa-info-circle text-yellow-400 flex-shrink-0 mt-1"></i>
                <div class="text-sm text-gray-300">
                    The subscriber will no longer receive any email notifications and their email address will be removed from all lists.
                </div>
            </div>
        </div>

        <!-- Form -->
        <form method="post">
            {% csrf_token %}
            
            <div class="flex items-center justify-center gap-4">
                <a href="{% url 'aura_admin:blog:subscriber_detail' object.pk %}" 
                   class="btn btn-outline btn-lg">
                    <i class="fas fa-times mr-2"></i>
                    Cancel
                </a>
                
                <button type="submit" class="btn btn-danger btn-lg">
                    <i class="fas fa-trash mr-2"></i>
                    Yes, Delete Subscriber
                </button>
            </div>
        </form>

        <!-- Additional Info -->
        <div class="mt-6 pt-6 border-t border-gray-700">
            <p class="text-center text-sm text-gray-500">
                <i class="fas fa-lightbulb mr-1"></i>
                <strong>Alternative:</strong> Consider deactivating the subscriber instead of deleting if you might need this data later.
            </p>
        </div>

    </div>

    <!-- Quick Navigation -->
    <div class="mt-6 text-center">
        <a href="{% url 'aura_admin:blog:subscriber_list' %}" class="text-cyan-400 hover:text-cyan-300 text-sm">
            <i class="fas fa-arrow-left mr-1"></i>
            Back to Subscriber List
        </a>
    </div>

</div>

<script>
// Add confirmation on form submit (extra safety)
document.querySelector('form').addEventListener('submit', function(e) {
    if (!confirm('Are you absolutely sure you want to delete this subscriber? This action cannot be undone.')) {
        e.preventDefault();
    }
});
</script>

{% endblock %}