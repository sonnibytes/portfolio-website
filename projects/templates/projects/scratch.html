<!----
 * AURA Portfolio - Enhanced Systems Dashboard Template
 * Advanced User Repository & Archive - Complete Foundation
 * Version: 3.0.0 - Advanced Analytics Command Center with Real-time Metrics
---->

{% extends "projects/systems_base.html" %}
{% load static %}
{% load aura_filters %}
{% load aura_components %}

{% block systems_title %}Command Center{% endblock %}
{% block meta_description %}Advanced systems analytics dashboard with real-time metrics, performance monitoring, and development insights{% endblock %}

{% block systems_css %}
<link rel="stylesheet" href="{% static 'projects/css/systems-unified.css' %}">
<style>
    /* Additional dashboard-specific enhancements */
    .dashboard-hero-section {
        margin-bottom: var(--spacing-xl, 2rem);
    }
    
    .dashboard-content-grid {
        display: grid;
        gap: var(--spacing-xl, 2rem);
    }
    
    /* Chart container styling */
    .chart-container {
        position: relative;
        height: 300px;
        padding: 1rem;
    }
    
    /* Real-time indicator styling */
    .real-time-indicator {
        display: flex;
        align-items: center;
        gap: var(--spacing-xs, 0.5rem);
        font-size: 0.85rem;
        color: var(--color-success, #4caf50);
        padding: var(--spacing-xs, 0.5rem) var(--spacing-md, 1rem);
        background: rgba(76, 175, 80, 0.1);
        border-radius: var(--border-radius-md, 8px);
        border: 1px solid rgba(76, 175, 80, 0.2);
        margin-top: var(--spacing-md, 1rem);
    }
    
    .real-time-indicator .pulse {
        width: 8px;
        height: 8px;
        background: var(--color-success, #4caf50);
        border-radius: 50%;
        animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
        0% { opacity: 1; transform: scale(1); }
        50% { opacity: 0.5; transform: scale(1.2); }
        100% { opacity: 1; transform: scale(1); }
    }
    
    /* Technology grid styling */
    .tech-usage-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: var(--spacing-md, 1rem);
    }
    
    .tech-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: var(--spacing-md, 1rem);
        background: rgba(var(--system-category-rgb, 0, 240, 255), 0.05);
        border-radius: var(--border-radius-lg, 12px);
        border: 1px solid rgba(var(--system-category-rgb, 0, 240, 255), 0.1);
        transition: all 0.3s ease;
    }
    
    .tech-item:hover {
        background: rgba(var(--system-category-rgb, 0, 240, 255), 0.1);
        transform: translateX(4px);
    }
    
    /* Health breakdown grid */
    .health-breakdown {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
        gap: var(--spacing-md, 1rem);
    }
    
    .health-item {
        text-align: center;
        padding: var(--spacing-lg, 1.5rem) var(--spacing-md, 1rem);
        background: rgba(var(--system-category-rgb, 0, 240, 255), 0.05);
        border-radius: var(--border-radius-lg, 12px);
        border: 1px solid rgba(var(--system-category-rgb, 0, 240, 255), 0.1);
        transition: all 0.3s ease;
    }
    
    .health-item:hover {
        background: rgba(var(--system-category-rgb, 0, 240, 255), 0.1);
        transform: translateY(-2px);
    }
    
    /* Performance status colors */
    .performance-excellent { color: var(--color-success, #4caf50); }
    .performance-good { color: var(--color-info, #2196f3); }
    .performance-fair { color: var(--color-warning, #ff9800); }
    .performance-poor { color: var(--color-danger, #f44336); }
</style>
{% endblock %}(-3px);
        box-shadow: 
            0 25px 70px rgba(0, 0, 0, 0.4),
            0 0 40px rgba(179, 157, 219, 0.12);
        border-color: rgba(255, 255, 255, 0.18);
    }
    
    .chart-container {
        position: relative;
        height: 300px;
        margin: 1rem 0;
        padding: 1.5rem;
        background: rgba(0, 0, 0, 0.2);
        border-radius: var(--border-radius-lg, 12px);
        border: 1px solid rgba(255, 255, 255, 0.08);
    }
    
    /* Enhanced health breakdown with unified styling */
    .health-breakdown {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
        gap: 1rem;
        padding: 1.5rem;
    }
    
    .health-item {
        text-align: center;
        padding: 1.5rem 1rem;
        border-radius: var(--border-radius-lg, 12px);
        background: 
            linear-gradient(135deg, rgba(255, 255, 255, 0.03), rgba(255, 255, 255, 0.01)),
            rgba(0, 0, 0, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.08);
        transition: all 0.3s ease;
        position: relative;
        backdrop-filter: blur(10px);
    }
    
    .health-item:hover {
        transform: translateY(-3px);
        background: 
            linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02)),
            rgba(0, 0, 0, 0.3);
        border-color: var(--color-teal);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
    }
    
    /* Enhanced technology usage grid with unified styling */
    .tech-usage-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1rem;
        padding: 1.5rem;
        max-height: 400px;
        overflow-y: auto;
    }
    
    .tech-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 1rem;
        border-radius: var(--border-radius-lg, 12px);
        background: 
            linear-gradient(135deg, rgba(255, 255, 255, 0.03), rgba(255, 255, 255, 0.01)),
            rgba(0, 0, 0, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-left: 4px solid var(--color-teal);
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
    }
    
    .tech-item:hover {
        background: 
            linear-gradient(135deg, rgba(0, 240, 255, 0.1), rgba(0, 240, 255, 0.05)),
            rgba(0, 0, 0, 0.3);
        transform: translateX(6px);
        border-left-color: var(--color-lavender);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
    }
    
    /* Enhanced activity timeline with unified containers */
    .activity-timeline {
        max-height: 400px;
        overflow-y: auto;
        padding: 1.5rem;
    }
    
    .activity-item {
        display: flex;
        align-items: center;
        padding: 1rem;
        margin-bottom: 0.75rem;
        border-radius: var(--border-radius-lg, 12px);
        background: 
            linear-gradient(135deg, rgba(255, 255, 255, 0.02), rgba(255, 255, 255, 0.01)),
            rgba(0, 0, 0, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.08);
        transition: all 0.3s ease;
        position: relative;
        backdrop-filter: blur(10px);
    }
    
    .activity-item:hover {
        background: 
            linear-gradient(135deg, rgba(0, 240, 255, 0.08), rgba(179, 157, 219, 0.06)),
            rgba(0, 0, 0, 0.3);
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        border-color: rgba(255, 255, 255, 0.15);
    }
    
    .activity-icon {
        margin-right: 1.5rem;
        min-width: 45px;
        height: 45px;
        border-radius: 50%;
        background: 
            linear-gradient(135deg, rgba(0, 240, 255, 0.2), rgba(179, 157, 219, 0.15)),
            rgba(0, 0, 0, 0.3);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
        color: var(--color-teal);
        border: 1px solid rgba(0, 240, 255, 0.3);
        backdrop-filter: blur(10px);
    }
    
    .activity-content a {
        color: var(--color-teal);
        text-decoration: none;
        font-weight: 500;
        transition: color 0.2s ease;
    }
    
    .activity-content a:hover {
        color: var(--color-lavender);
    }
    
    .activity-content small {
        display: block;
        color: var(--color-muted, rgba(255, 255, 255, 0.6));
        margin-top: 0.25rem;
        font-size: 0.8rem;
    }
    
    /* Enhanced alert items with unified styling */
    .alert-item {
        display: flex;
        align-items: center;
        padding: 1rem;
        margin-bottom: 0.75rem;
        border-radius: var(--border-radius-lg, 12px);
        background: 
            linear-gradient(135deg, rgba(255, 255, 255, 0.02), rgba(255, 255, 255, 0.01)),
            rgba(0, 0, 0, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-left: 4px solid;
        backdrop-filter: blur(10px);
        transition: all 0.3s ease;
    }
    
    .alert-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
    }
    
    /* Real-time indicator with enhanced styling */
    .real-time-indicator {
        display: flex;
        align-items: center;
        font-size: 0.875rem;
        color: var(--color-success, #4caf50);
        opacity: 0.9;
        padding: 0.5rem 1rem;
        background: rgba(76, 175, 80, 0.1);
        border-radius: var(--border-radius-lg, 12px);
        border: 1px solid rgba(76, 175, 80, 0.2);
    }
    
    .real-time-indicator .pulse {
        width: 8px;
        height: 8px;
        background: var(--color-success, #4caf50);
        border-radius: 50%;
        margin-right: 0.75rem;
        animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
        0% { opacity: 1; transform: scale(1); }
        50% { opacity: 0.5; transform: scale(1.2); }
        100% { opacity: 1; transform: scale(1); }
    }
    
    /* Alert severity styling */
    .alert-item.critical {
        border-left-color: var(--color-danger, #f44336);
        background: 
            linear-gradient(135deg, rgba(244, 67, 54, 0.1), rgba(244, 67, 54, 0.05)),
            rgba(0, 0, 0, 0.2);
    }
    
    .alert-item.warning {
        border-left-color: var(--color-warning, #ff9800);
        background: 
            linear-gradient(135deg, rgba(255, 152, 0, 0.1), rgba(255, 152, 0, 0.05)),
            rgba(0, 0, 0, 0.2);
    }
    
    .alert-item.info {
        border-left-color: var(--color-info, #2196f3);
        background: 
            linear-gradient(135deg, rgba(33, 150, 243, 0.1), rgba(33, 150, 243, 0.05)),
            rgba(0, 0, 0, 0.2);
    }
    
    /* Performance status colors */
    .performance-excellent { color: var(--color-success, #4caf50); }
    .performance-good { color: var(--color-info, #2196f3); }
    .performance-fair { color: var(--color-warning, #ff9800); }
    .performance-poor { color: var(--color-danger, #f44336); }
    
    /* Enhanced development insights container */
    .development-insights-container {
        padding: 1.5rem;
    }
    
    .insight-metric {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
        padding: 1rem;
        background: 
            linear-gradient(135deg, rgba(255, 255, 255, 0.02), rgba(255, 255, 255, 0.01)),
            rgba(0, 0, 0, 0.2);
        border-radius: var(--border-radius-lg, 12px);
        border: 1px solid rgba(255, 255, 255, 0.08);
        backdrop-filter: blur(5px);
    }
    
    .insight-metric:last-child {
        margin-bottom: 0;
    }
    
    .metric-progress-bar {
        width: 100%;
        height: 6px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 3px;
        margin-top: 0.5rem;
        overflow: hidden;
    }
    
    .metric-progress-fill {
        height: 100%;
        border-radius: 3px;
        transition: width 0.8s ease;
    }
    
    /* System type items with enhanced styling */
    .system-type-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 1rem;
        margin-bottom: 0.75rem;
        background: 
            linear-gradient(135deg, rgba(255, 255, 255, 0.03), rgba(255, 255, 255, 0.01)),
            rgba(0, 0, 0, 0.2);
        border-radius: var(--border-radius-lg, 12px);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-left: 4px solid;
        backdrop-filter: blur(10px);
        transition: all 0.3s ease;
    }
    
    .system-type-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        background: 
            linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02)),
            rgba(0, 0, 0, 0.3);
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
        .dashboard-hero {
            padding: 1.5rem;
        }
        
        .hero-metrics-grid {
            grid-template-columns: 1fr;
            gap: 1rem;
        }
        
        .tech-usage-grid,
        .health-breakdown {
            grid-template-columns: 1fr;
        }
        
        .chart-container {
            height: 250px;
        }
    }
</style>
{% endblock %}

{% block systems_breadcrumbs %}
<a href="{% url 'projects:systems_dashboard' %}" class="breadcrumb-item active">
    <i class="fas fa-tachometer-alt"></i>
    Command Center
</a>
{% endblock %}

{% block systems_content %}
<div class="systems-dashboard">
    
    <!-- ðŸš€ Dashboard Hero Section -->
    <div class="dashboard-hero">
        {% section_header 
            title="AURA Command Center" 
            subtitle="Real-time System Monitoring & Performance Analytics" 
            icon="fas fa-tachometer-alt" 
        %}
        
        <div class="real-time-indicator" style="margin-top: 1rem;">
            <span class="pulse"></span>
            Live Dashboard - Updated {{ dashboard_stats.last_updated|default:"now"|timesince }} ago
        </div>
        
        <div class="hero-metrics-grid">
            {% metric_card dashboard_stats.total_systems "Active Systems" "fas fa-server" "teal" %}
            {% metric_card dashboard_stats.deployed_systems "Deployed" "fas fa-rocket" "coral" %}
            {% metric_card dashboard_stats.avg_completion|floatformat:1 "% Avg Completion" "fas fa-chart-line" "lavender" %}
            {% if dashboard_stats.avg_uptime %}
            {% metric_card dashboard_stats.avg_uptime|floatformat:1 "% Avg Uptime" "fas fa-heartbeat" "success" %}
            {% endif %}
        </div>
    </div>
    
    <div class="dashboard-grid">
        
        <!-- ðŸ“Š System Overview & Health -->
        <div class="row">
            <div class="col-lg-8">
                {% glass_card title="System Completion Progress" icon="fas fa-chart-bar" %}
                    <div class="chart-container">
                        <canvas id="completionChart"></canvas>
                    </div>
                {% endglass_card %}
            </div>
            <div class="col-lg-4">
                {% glass_card title="System Health Overview" icon="fas fa-heartbeat" %}
                    <div class="health-breakdown">
                        {% if system_analytics.systems_by_health.excellent %}
                        <div class="health-item performance-excellent">
                            <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div style="font-weight: bold; font-size: 1.2rem;">{{ system_analytics.systems_by_health.excellent }}</div>
                            <div style="font-size: 0.75rem; opacity: 0.8;">Excellent</div>
                        </div>
                        {% endif %}
                        
                        {% if system_analytics.systems_by_health.good %}
                        <div class="health-item performance-good">
                            <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">
                                <i class="fas fa-thumbs-up"></i>
                            </div>
                            <div style="font-weight: bold; font-size: 1.2rem;">{{ system_analytics.systems_by_health.good }}</div>
                            <div style="font-size: 0.75rem; opacity: 0.8;">Good</div>
                        </div>
                        {% endif %}
                        
                        {% if system_analytics.systems_by_health.fair %}
                        <div class="health-item performance-fair">
                            <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div style="font-weight: bold; font-size: 1.2rem;">{{ system_analytics.systems_by_health.fair }}</div>
                            <div style="font-size: 0.75rem; opacity: 0.8;">Fair</div>
                        </div>
                        {% endif %}
                        
                        {% if system_analytics.systems_by_health.poor %}
                        <div class="health-item performance-poor">
                            <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">
                                <i class="fas fa-times-circle"></i>
                            </div>
                            <div style="font-weight: bold; font-size: 1.2rem;">{{ system_analytics.systems_by_health.poor }}</div>
                            <div style="font-size: 0.75rem; opacity: 0.8;">Poor</div>
                        </div>
                        {% endif %}
                        
                        {% if system_analytics.systems_by_health.unknown %}
                        <div class="health-item" style="color: var(--color-muted);">
                            <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">
                                <i class="fas fa-question-circle"></i>
                            </div>
                            <div style="font-weight: bold; font-size: 1.2rem;">{{ system_analytics.systems_by_health.unknown }}</div>
                            <div style="font-size: 0.75rem; opacity: 0.8;">Unknown</div>
                        </div>
                        {% endif %}
                    </div>
                {% endglass_card %}
            </div>
        </div>
        
        <!-- ðŸ”§ Technology Usage & System Types -->
        <div class="row">
            <div class="col-lg-6">
                {% glass_card title="Technology Usage Distribution" icon="fas fa-code" %}
                    <div class="tech-usage-grid">
                        {% for tech_data in technology_insights.top_technologies|slice:":8" %}
                        <div class="tech-item">
                            <div>
                                <div style="font-weight: 500; color: var(--color-teal);">{{ tech_data.name }}</div>
                                <div style="font-size: 0.8rem; color: var(--color-muted);">{{ tech_data.systems_count }} system{{ tech_data.systems_count|pluralize }}</div>
                            </div>
                            <div style="font-weight: bold; color: var(--color-lavender);">
                                {{ tech_data.usage_percentage|floatformat:0 }}%
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                {% endglass_card %}
            </div>
            <div class="col-lg-6">
                {% glass_card title="System Types Overview" icon="fas fa-layer-group" %}
                    <div style="padding: 1rem;">
                        {% for type_data in system_analytics.systems_by_type %}
                        <div style="display: flex; align-items: center; justify-content: space-between; padding: 0.75rem; margin-bottom: 0.5rem; background: rgba(255, 255, 255, 0.05); border-radius: 6px; border-left: 4px solid {{ type_data.system_type__color }};">
                            <div style="display: flex; align-items: center;">
                                {% if type_data.system_type__icon %}
                                <i class="{{ type_data.system_type__icon }}" style="margin-right: 1rem; color: {{ type_data.system_type__color }};"></i>
                                {% else %}
                                <div style="width: 16px; height: 16px; background: {{ type_data.system_type__color }}; border-radius: 50%; margin-right: 1rem;"></div>
                                {% endif %}
                                <div>
                                    <div style="font-weight: 500;">{{ type_data.system_type__name }}</div>
                                    <div style="font-size: 0.8rem; color: var(--color-muted);">{{ type_data.count }} system{{ type_data.count|pluralize }}</div>
                                </div>
                            </div>
                            <div style="font-weight: bold; color: {{ type_data.system_type__color }};">
                                {{ type_data.count }}
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                {% endglass_card %}
            </div>
        </div>
        
        <!-- ðŸ“ˆ Development Metrics & Recent Activity -->
        <div class="row">
            <div class="col-lg-8">
                {% glass_card title="Development Activity Timeline" icon="fas fa-clock" %}
                    <div class="activity-timeline">
                        {% for activity in recent_activity|slice:":10" %}
                        <div class="activity-item">
                            <div class="activity-icon">
                                {% if activity.type == 'commit' %}
                                    <i class="fas fa-code-branch"></i>
                                {% elif activity.type == 'deployment' %}
                                    <i class="fas fa-rocket"></i>
                                {% elif activity.type == 'update' %}
                                    <i class="fas fa-edit"></i>
                                {% else %}
                                    <i class="fas fa-cog"></i>
                                {% endif %}
                            </div>
                            <div class="activity-content">
                                <div>
                                    <a href="{% url 'projects:system_detail' activity.system.slug %}">
                                        {{ activity.system.title }}
                                    </a>
                                    - {{ activity.description }}
                                </div>
                                <small>{{ activity.timestamp|timesince }} ago</small>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                {% endglass_card %}
            </div>
            <div class="col-lg-4">
                {% glass_card title="Development Insights" icon="fas fa-chart-pie" %}
                    <div class="development-insights-container">
                        <!-- Total Code Lines -->
                        <div class="insight-metric">
                            <div>
                                <span style="color: var(--color-muted, rgba(255, 255, 255, 0.6));">Total Lines of Code</span>
                                <span style="font-weight: bold; color: var(--color-teal); font-size: 1.1rem; margin-left: 1rem;">{{ dashboard_stats.total_code_lines|format_number }}</span>
                            </div>
                            <div class="metric-progress-bar">
                                <div class="metric-progress-fill" style="width: 100%; background: linear-gradient(90deg, var(--color-teal), var(--color-lavender));"></div>
                            </div>
                        </div>
                        
                        <!-- Total Commits -->
                        <div class="insight-metric">
                            <div>
                                <span style="color: var(--color-muted, rgba(255, 255, 255, 0.6));">Total Commits</span>
                                <span style="font-weight: bold; color: var(--color-coral); font-size: 1.1rem; margin-left: 1rem;">{{ dashboard_stats.total_commits|format_number }}</span>
                            </div>
                            <div class="metric-progress-bar">
                                <div class="metric-progress-fill" style="width: 85%; background: linear-gradient(90deg, var(--color-coral), var(--color-yellow));"></div>
                            </div>
                        </div>
                        
                        <!-- Development Hours -->
                        {% if dashboard_stats.total_dev_hours.actual %}
                        <div class="insight-metric">
                            <div>
                                <span style="color: var(--color-muted, rgba(255, 255, 255, 0.6));">Development Hours</span>
                                <span style="font-weight: bold; color: var(--color-success); font-size: 1.1rem; margin-left: 1rem;">{{ dashboard_stats.total_dev_hours.actual }}h</span>
                            </div>
                            <div class="metric-progress-bar">
                                {% widthratio dashboard_stats.total_dev_hours.actual dashboard_stats.total_dev_hours.estimated 100 as dev_progress %}
                                <div class="metric-progress-fill" style="width: {{ dev_progress|default:0 }}%; background: linear-gradient(90deg, var(--color-success), var(--color-mint));"></div>
                            </div>
                        </div>
                        {% endif %}
                        
                        <!-- Average Team Size -->
                        <div class="insight-metric">
                            <div>
                                <span style="color: var(--color-muted, rgba(255, 255, 255, 0.6));">Avg Team Size</span>
                                <span style="font-weight: bold; color: var(--color-lavender); font-size: 1.1rem; margin-left: 1rem;">{{ dashboard_stats.avg_team_size|floatformat:1 }}</span>
                            </div>
                            <div class="metric-progress-bar">
                                {% widthratio dashboard_stats.avg_team_size dashboard_stats.largest_team 100 as team_progress %}
                                <div class="metric-progress-fill" style="width: {{ team_progress|default:0 }}%; background: linear-gradient(90deg, var(--color-lavender), var(--color-navy));"></div>
                            </div>
                        </div>
                    </div>
                {% endglass_card %}
            </div>
        </div>
        
        <!-- Critical Alerts Section -->
        {% if critical_alerts %}
        <div class="dashboard-section">
            {% glass_card title="System Alerts & Notifications" css_class="alerts-panel" icon="fas fa-exclamation-triangle" %}
                <div style="padding: 1.5rem;">
                    {% for alert in critical_alerts|slice:":8" %}
                    <div class="alert-item {{ alert.severity }}">
                        <div style="margin-right: 1.5rem; font-size: 1.2rem;">
                            {% if alert.type == 'performance' %}
                                <i class="fas fa-tachometer-alt"></i>
                            {% elif alert.type == 'uptime' %}
                                <i class="fas fa-heartbeat"></i>
                            {% elif alert.type == 'dependency' %}
                                <i class="fas fa-link"></i>
                            {% else %}
                                <i class="fas fa-exclamation"></i>
                            {% endif %}
                        </div>
                        <div style="flex: 1;">
                            <div style="font-weight: 500; margin-bottom: 0.25rem;">{{ alert.message }}</div>
                            <div style="font-size: 0.8rem; color: var(--color-muted, rgba(255, 255, 255, 0.6));">
                                System: <a href="{% url 'projects:system_detail' alert.system.slug %}" style="color: var(--color-teal); text-decoration: none;">{{ alert.system.title }}</a>
                            </div>
                        </div>
                        <div style="font-size: 0.75rem; color: var(--color-muted, rgba(255, 255, 255, 0.6)); text-align: right;">
                            {{ alert.timestamp|timesince }} ago
                        </div>
                    </div>
                    {% endfor %}
                </div>
            {% endglass_card %}
        </div>
        {% endif %}
        
    </div>
</div>

<!-- Chart.js Integration -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    // ðŸ“Š System Completion Progress Chart
    const completionCtx = document.getElementById('completionChart');
    if (completionCtx) {
        new Chart(completionCtx, {
            type: 'doughnut',
            data: {
                labels: ['Deployed', 'Testing', 'Development', 'Draft'],
                datasets: [{
                    data: [
                        {{ dashboard_stats.deployed_systems }},
                        {{ dashboard_stats.systems_testing }},
                        {{ dashboard_stats.systems_in_development }},
                        {{ dashboard_stats.total_systems|subtract:dashboard_stats.deployed_systems|subtract:dashboard_stats.systems_testing|subtract:dashboard_stats.systems_in_development }}
                    ],
                    backgroundColor: [
                        'rgba(76, 175, 80, 0.8)',   // Success green
                        'rgba(255, 235, 59, 0.8)',  // Warning yellow
                        'rgba(33, 150, 243, 0.8)',  // Info blue
                        'rgba(158, 158, 158, 0.8)'  // Muted gray
                    ],
                    borderColor: [
                        'rgba(76, 175, 80, 1)',
                        'rgba(255, 235, 59, 1)',
                        'rgba(33, 150, 243, 1)',
                        'rgba(158, 158, 158, 1)'
                    ],
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            color: '#ffffff',
                            padding: 20,
                            font: {
                                size: 12
                            }
                        }
                    }
                }
            }
        });
    }
    
    // ðŸŽ¯ Systems Unified Container Interactions
    const containers = document.querySelectorAll('.systems-unified-container');
    containers.forEach(container => {
        // Add subtle interaction feedback
        container.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-3px)';
        });
        
        container.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
        });
    });
    
    // ðŸ”„ Auto-refresh functionality for real-time data
    const refreshDashboard = () => {
        // Add refresh logic here when API endpoints are ready
        console.log('Dashboard refresh triggered');
    };
    
    // Refresh every 5 minutes
    setInterval(refreshDashboard, 300000);
});
</script>
{% endblock %}